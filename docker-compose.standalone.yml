version: '3.8'

# ==========================================
# YPrompt Docker Compose 配置（独立部署版）
# 不依赖 Traefik，直接暴露端口
#
# 适用场景：
# - 本地开发测试
# - 不使用 Traefik 的部署环境
# - 使用其他反向代理（Nginx/Caddy 等）
#
# 启动命令：
# docker-compose -f docker-compose.standalone.yml up -d
#
# 访问地址：http://localhost:8080
# ==========================================

services:
  yprompt:
    image: ${YPROMPT_IMAGE:-ghcr.io/fish2018/yprompt:latest}
    container_name: yprompt
    restart: unless-stopped
    
    # 直接暴露端口
    ports:
      - "${YPROMPT_PORT:-8080}:8080"
    
    volumes:
      - ./data:/app/data
    
    environment:
      # 后端配置
      - YPROMPT_PORT=8080
      - YPROMPT_HOST=0.0.0.0
      - YPROMPT_WORKERS=1
      
      # 数据库配置
      - DB_TYPE=sqlite
      - SQLITE_DB_PATH=/app/data/yprompt.db
      
      # JWT配置（生产环境请修改）
      - SECRET_KEY=${SECRET_KEY:-change-me-in-production}
      
      # Linux.do OAuth配置（可选）
      - LINUX_DO_CLIENT_ID=${LINUX_DO_CLIENT_ID:-}
      - LINUX_DO_CLIENT_SECRET=${LINUX_DO_CLIENT_SECRET:-}
      - LINUX_DO_REDIRECT_URI=${LINUX_DO_REDIRECT_URI:-}
      
      # 默认管理员账号
      - ADMIN_USERNAME=${ADMIN_USERNAME:-admin}
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-admin123}

